--Mostra a porcentagem atual de waits e suas classes
SELECT A.WAIT_CLASS, ROUND((A.TOTAL_WAITS/B.SUM_TOTAL_WAITS)*100,2) AS PCT_TOTAL_WAITS,
ROUND((A.TIME_WAITED/B.SUM_TIME_WAITED)*100,2) AS PCP_TIME_WAITED
FROM
(SELECT * FROM V$SYSTEM_WAIT_CLASS
WHERE WAIT_CLASS <> 'Idle') A,
(SELECT SUM(TOTAL_WAITS) AS SUM_TOTAL_WAITS, SUM(TIME_WAITED) AS SUM_TIME_WAITED 
FROM V$SYSTEM_WAIT_CLASS
WHERE WAIT_CLASS <> 'Idle') B;

--Estatistica de tempo de CPU
SELECT METRIC_NAME, VALUE FROM V$SYSMETRIC
WHERE METRIC_NAME IN ('Database CPU Time Ratio','Database Wait Time Ratio');
